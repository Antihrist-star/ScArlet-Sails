# üß† MODEL DECISION PHILOSOPHY - Scarlet Sails

**–î–∞—Ç–∞:** 2025-11-11
**–¶–µ–ª—å:** –ü–æ–Ω—è—Ç—å –ö–ê–ö –∏ –ü–û–ß–ï–ú–£ –∫–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è

---

## üéØ –ì–õ–ê–í–ù–´–ô –í–û–ü–†–û–°

**–í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–ø—Ä–æ—Å–∏–ª–∏:** "–Ø –Ω–µ –º–æ–≥—É –ø–æ–Ω—è—Ç—å –≤ —á–µ–º –æ—Ç–ª–∏—á–∏—è. –ï—Å–ª–∏ –º–æ–¥–µ–ª–∏ –¥—É–º–∞—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É, —Ç–æ —è –±—É–¥—É —É–ª—É—á—à–∞—Ç—å —Ç—Ä–∏ –º–æ–¥–µ–ª–∏. –ú–æ–∂–µ—Ç –Ω–∞–º –∏ –Ω–µ –Ω—É–∂–Ω—ã –≤—Å–µ —Ç—Ä–∏?"

**–û—Ç–≤–µ—Ç:** –î–∞, –º–æ–¥–µ–ª–∏ –¥—É–º–∞—é—Ç –ü–†–ò–ù–¶–ò–ü–ò–ê–õ–¨–ù–û –ø–æ-—Ä–∞–∑–Ω–æ–º—É! –í–æ—Ç –∫–∞–∫:

---

## üìê –í–ê–®–ê –§–û–†–ú–£–õ–ê vs –¢–†–ò –ú–û–î–ï–õ–ò

–í—ã –¥–∞–ª–∏ —Ñ–æ—Ä–º—É–ª—É –¥–ª—è –æ–¥–Ω–æ–π –º–æ–¥–µ–ª–∏:

```
P_j(S) = ML(market_state, portfolio_state, risk, regime, history) ¬∑ ‚àè_k I_k
         + opportunity(S) - costs(S) - risk_penalty(S) + Œ≥¬∑E[V_future]
```

–≠—Ç–æ **–∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è multi-factor –º–æ–¥–µ–ª—å** —Å ML, —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, costs, RL –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–π.

**–°–µ–π—á–∞—Å —É –≤–∞—Å:**
- Rule-Based: –ø—Ä–æ—Å—Ç–µ–π—à–∞—è –≤–µ—Ä—Å–∏—è (—Ç–æ–ª—å–∫–æ I_k —Ñ–∏–ª—å—Ç—Ä—ã)
- ML: —Å—Ä–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è (ML –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤)
- Hybrid: –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∫ –≤–∞—à–µ–π —Ñ–æ—Ä–º—É–ª–µ (ML ¬∑ ‚àè I_k)

–ù–æ **–ù–ò –û–î–ù–ê** –Ω–µ –∏–º–µ–µ—Ç costs, risk_penalty, –∏–ª–∏ RL –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É!

---

## 1Ô∏è‚É£ RULE-BASED: "Reactive Indicator-Following"

### –§–∏–ª–æ—Å–æ—Ñ–∏—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

```
IF (–ª–æ–∫–∞–ª—å–Ω—ã–π —Å–∏–≥–Ω–∞–ª) THEN (–¥–µ–π—Å—Ç–≤—É–π)
```

**–¢–∏–ø –º—ã—à–ª–µ–Ω–∏—è:** –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ
**–ì–æ—Ä–∏–∑–æ–Ω—Ç:** –¢–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç (15m –±–∞—Ä)
**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** 1 –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä (RSI)
**–ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è:**
- RSI < 30 –≤—Å–µ–≥–¥–∞ –æ–∑–Ω–∞—á–∞–µ—Ç oversold
- Oversold –≤—Å–µ–≥–¥–∞ –≤–µ–¥–µ—Ç –∫ –æ—Ç—Å–∫–æ–∫—É
- –ü—Ä–æ—à–ª–æ–µ –Ω–µ –≤–∞–∂–Ω–æ, –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ –≤–∞–∂–µ–Ω

### Decision Tree

```
Bar_t arrives
  ‚Üì
Calculate RSI_14(t)
  ‚Üì
  ‚îú‚îÄ RSI < 30?
  ‚îÇ    YES ‚Üí ENTER
  ‚îÇ    NO  ‚Üí SKIP
```

### "–í–∏–¥–µ–Ω–∏–µ" –º–æ–¥–µ–ª–∏

–ú–æ–¥–µ–ª—å "–≤–∏–¥–∏—Ç" —Ç–æ–ª—å–∫–æ:
```
[Bar t-14] ... [Bar t-1] [Bar t]
                           ‚Üë
                         RSI=28
                      "OVERSOLD!"
```

–ú–æ–¥–µ–ª—å –ù–ï –≤–∏–¥–∏—Ç:
- –ß—Ç–æ –±—ã–ª–æ 1 —á–∞—Å –Ω–∞–∑–∞–¥ (uptrend? downtrend?)
- –ß—Ç–æ –±—ã–ª–æ 1 –¥–µ–Ω—å –Ω–∞–∑–∞–¥ (bull market? bear market?)
- –ì–ª–æ–±–∞–ª—å–Ω—É—é –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (VIX, –∫—Ä–∏–∑–∏—Å?)
- –û–±—ä–µ–º (—Å–ª–∞–±—ã–π? —Å–∏–ª—å–Ω—ã–π?)

### –ê–Ω–∞–ª–æ–≥–∏—è

**–ß–µ–ª–æ–≤–µ–∫ —Å –∑–∞–≤—è–∑–∞–Ω–Ω—ã–º–∏ –≥–ª–∞–∑–∞–º–∏:**
- –ß—É–≤—Å—Ç–≤—É–µ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É (RSI)
- –ï—Å–ª–∏ —Ö–æ–ª–æ–¥–Ω–æ (< 30) ‚Üí –≥–æ–≤–æ—Ä–∏—Ç "–û–¥–µ–≤–∞–π—Å—è!"
- –ù–µ –∑–Ω–∞–µ—Ç: –Ω–∞ —É–ª–∏—Ü–µ –∑–∏–º–∞ –∏–ª–∏ —ç—Ç–æ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫?

### –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞

```
P_rule(S) = I_RSI(S)

–≥–¥–µ:
  I_RSI(S) = 1  –µ—Å–ª–∏ RSI_14(S) < 30
             0  –∏–Ω–∞—á–µ

  S = state (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–π –±–∞—Ä)
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤–∞—à–µ–π —Ñ–æ—Ä–º—É–ª–æ–π

```
–í–∞—à–∞:       ML(...) ¬∑ ‚àè I_k + opportunity - costs - risk + Œ≥¬∑E[V_future]
Rule-Based: I_RSI   ¬∑ 1     + 0           - 0     - 0    + 0

–£–ø—Ä–æ—â–µ–Ω–∏—è:
  - ML = 0 (–Ω–µ—Ç ML)
  - ‚àè I_k = I_RSI —Ç–æ–ª—å–∫–æ
  - opportunity = 0 (–Ω–µ –∏–∑–º–µ—Ä—è–µ—Ç—Å—è)
  - costs = 0 (–∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è)
  - risk_penalty = 0 (–Ω–µ—Ç –æ—Ü–µ–Ω–∫–∏ —Ä–∏—Å–∫–∞)
  - Œ≥¬∑E[V_future] = 0 (–Ω–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞)
```

### –ö–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ **–ë–æ–∫–æ–≤–æ–π —Ä—ã–Ω–æ–∫ (range-bound)**
```
Price: $50K ‚Üê ‚Üí $60K ‚Üê ‚Üí $50K ‚Üê ‚Üí $60K
       ‚Üì           ‚Üì           ‚Üì
     RSI<30      RSI>70      RSI<30
     –í–•–û–î ‚úÖ     –í—ã—Ö–æ–¥       –í–•–û–î ‚úÖ
```

‚ùå **–ù–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥ (downtrend)**
```
Price: $70K ‚Üí $60K ‚Üí $50K ‚Üí $40K ‚Üí $30K
               ‚Üì       ‚Üì       ‚Üì       ‚Üì
            RSI<30  RSI<30  RSI<30  RSI<30
            –í–•–û–î ‚ùå –í–•–û–î ‚ùå –í–•–û–î ‚ùå –í–•–û–î ‚ùå
            "Falling knife!"
```

### –ü–æ—á–µ–º—É –ø—Ä–æ–∏–≥—Ä–∞–ª–∞ –Ω–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

```
Period: October 2025 (bars 265,000-275,000)
Market: Downtrend $111K ‚Üí $107K (–ø–∞–¥–µ–Ω–∏–µ 3.6%)
Rule-Based:
  - –í–∏–¥–µ–ª–∞ RSI < 30
  - –í—Ö–æ–¥–∏–ª–∞ 1,065 —Ä–∞–∑
  - –î—É–º–∞–ª–∞: "Oversold ‚Üí –æ—Ç—Å–∫–æ–∫"
  - –†–µ–∞–ª—å–Ω–æ—Å—Ç—å: –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø–∞–¥–µ–Ω–∏—è
  - Result: WR 24.6%, PF 0.89, -73.93%
```

---

## 2Ô∏è‚É£ ML XGBOOST: "Pattern-Matching Predictor"

### –§–∏–ª–æ—Å–æ—Ñ–∏—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

```
IF (–º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø–æ—Ö–æ–∂ –Ω–∞ —É—Å–ø–µ—à–Ω—ã–µ —Ç—Ä–µ–π–¥—ã –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ) THEN (–≤—Ö–æ–¥–∏)
```

**–¢–∏–ø –º—ã—à–ª–µ–Ω–∏—è:** –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–æ–µ
**–ì–æ—Ä–∏–∑–æ–Ω—Ç:** 24 —á–∞—Å–∞ –≤–ø–µ—Ä–µ–¥
**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** 31 –ø—Ä–∏–∑–Ω–∞–∫, 4 —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞
**–ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è:**
- –ü—Ä–æ—à–ª–æ–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è
- –ú–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Å—Ç–∞–±–∏–ª—å–Ω—ã
- –í—ã—Å—à–∏–µ —Ç–∞–π–º—Ñ—Ä–µ–π–º—ã –≤–∞–∂–Ω–µ–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö

### Decision Tree (—É–ø—Ä–æ—â–µ–Ω–Ω–æ)

```
Bar_t arrives
  ‚Üì
Extract 31 features from 4 timeframes
  X = [RSI_15m, EMA_15m, ..., RSI_1d, returns_1d]
  ‚Üì
Scale features: X_scaled = (X - Œº) / œÉ
  ‚Üì
XGBoost prediction (200 trees vote):
  Tree 1: if (1d_returns > 0.02) and (RSI < 35) ‚Üí UP (weight +0.05)
  Tree 2: if (4h_SMA > 15m_price) and (volume_ratio < 1.2) ‚Üí DOWN (weight -0.03)
  ...
  Tree 200: if (BB_width < 0.02) ‚Üí UP (weight +0.02)
  ‚Üì
Aggregate votes ‚Üí probability P(UP)
  ‚Üì
  ‚îú‚îÄ P(UP) ‚â• 0.65?
  ‚îÇ    YES ‚Üí ENTER
  ‚îÇ    NO  ‚Üí SKIP
```

### "–í–∏–¥–µ–Ω–∏–µ" –º–æ–¥–µ–ª–∏

–ú–æ–¥–µ–ª—å "–≤–∏–¥–∏—Ç":
```
[1 day ago]   [4h ago]     [1h ago]     [Now]
  ‚Üì             ‚Üì            ‚Üì            ‚Üì
returns=+3%   returns=+2%  returns=+1%  RSI=28
EMA trend UP  EMA trend UP EMA trend UP price=$58K
RSI=52        RSI=48       RSI=42       volume=1.3x

Pattern match: "Pullback in uptrend"
  ‚Üí Similar to trade #4521 (profitable)
  ‚Üí Similar to trade #8834 (profitable)
  ‚Üí P(UP) = 0.72 ‚Üí ENTER ‚úÖ
```

vs

```
[1 day ago]   [4h ago]     [1h ago]     [Now]
  ‚Üì             ‚Üì            ‚Üì            ‚Üì
returns=-5%   returns=-3%  returns=-2%  RSI=24
EMA trend DN  EMA trend DN EMA trend DN price=$55K
RSI=32        RSI=28       RSI=25       volume=2.1x

Pattern match: "Falling knife"
  ‚Üí Similar to trade #2341 (loss)
  ‚Üí Similar to trade #5678 (loss)
  ‚Üí P(UP) = 0.18 ‚Üí SKIP ‚úÖ
```

### –ê–Ω–∞–ª–æ–≥–∏—è

**–û–ø—ã—Ç–Ω—ã–π —Ç—Ä–µ–π–¥–µ—Ä —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:**
- –í–∏–¥–∏—Ç –Ω–µ —Ç–æ–ª—å–∫–æ RSI, –Ω–æ –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å 50,000 –ø—Ä–æ—à–ª—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π
- "–Ø —É–∂–µ –≤–∏–¥–µ–ª —ç—Ç–æ - –æ–±—ã—á–Ω–æ —Ç–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç..."
- –ù–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç "–ø–æ—á–µ–º—É" (—á–µ—Ä–Ω—ã–π —è—â–∏–∫)

### –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞

```
P_ml(S) = sigmoid(‚àë·µ¢‚Çå‚ÇÅ¬≤‚Å∞‚Å∞ f·µ¢((X(S) - Œº) / œÉ))

–≥–¥–µ:
  X(S) = extract_features(S) = [x‚ÇÅ, ..., x‚ÇÉ‚ÇÅ]

  X(S) = [
    # Primary 15m (13 features)
    RSI_14, EMA_9, EMA_21, SMA_50,
    BB_upper, BB_middle, BB_lower, BB_width,
    ATR, returns_5, returns_10, volume_ratio_5, volume_ratio_10,

    # Context 1h (6 features)
    close_1h, EMA_9_1h, EMA_21_1h, SMA_50_1h, RSI_1h, returns_5_1h,

    # Context 4h (6 features)
    close_4h, EMA_9_4h, EMA_21_4h, SMA_50_4h, RSI_4h, returns_5_4h,

    # Context 1d (6 features)
    close_1d, EMA_9_1d, EMA_21_1d, SMA_50_1d, RSI_1d, returns_5_1d
  ]

  f·µ¢ = i-–π decision tree

  Decision = 1 –µ—Å–ª–∏ P_ml(S) ‚â• 0.65
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤–∞—à–µ–π —Ñ–æ—Ä–º—É–ª–æ–π

```
–í–∞—à–∞:       ML(market, portfolio, risk, regime, history) ¬∑ ‚àè I_k + opp - costs - risk + Œ≥¬∑E[V]
ML XGBoost: ML(market=X, history=X) ¬∑ 1 + 0 - 0 - 0 + 0

–£–ø—Ä–æ—â–µ–Ω–∏—è:
  - ML ‚úÖ (–µ—Å—Ç—å!)
  - market_state ‚úÖ (31 feature, 4 TF)
  - history ‚úÖ (returns, MA)
  - portfolio_state ‚ùå (–Ω–µ—Ç)
  - risk ‚ùå (–Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é)
  - regime ‚ùå (–Ω–µ—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–µ–∂–∏–º–∞)
  - ‚àè I_k = 1 (–Ω–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤)
  - opportunity ‚ùå (–Ω–µ –∏–∑–º–µ—Ä—è–µ—Ç—Å—è)
  - costs ‚ùå
  - risk_penalty ‚ùå
  - Œ≥¬∑E[V_future] ‚âà 0 (–∫–æ—Å–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ returns, –Ω–æ –Ω–µ RL)
```

### –ü—Ä–æ–±–ª–µ–º–∞ Out-of-Distribution

**–ù–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**
```
Training: BTC price $13K-$70K (2018-2024?)
Testing:  BTC price $107K-$111K (October 2025)

Scaled features:
  1d_SMA_50 = $114,194 ‚Üí scaled = 5.855
  1d_EMA_21 = $112,632 ‚Üí scaled = 5.722

  –≠—Ç–æ > 5 sigma –æ—Ç –æ–±—É—á–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö!

Model reaction:
  "–Ø –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–∏–¥–µ–ª–∞ —Ç–∞–∫–∏—Ö —Ü–µ–Ω!"
  ‚Üí –í—Å–µ 10 —Ç—Ä–µ–π–¥–æ–≤: P(UP) = 0.183 (–ø–æ—á—Ç–∏ random)
  ‚Üí –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç confidently
```

**–†–ï–®–ï–ù–ò–ï:**
1. –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å –Ω–∞ –¥–∞–Ω–Ω—ã—Ö 2020-2025 (–≤–∫–ª—é—á–∞—è $70K-$111K range)
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å normalized features (returns –≤–º–µ—Å—Ç–æ absolute prices)
3. –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å regime detection (–º–æ–¥–µ–ª—å –ø–æ–Ω–∏–º–∞–µ—Ç "—è –≤ –Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ")

---

## 3Ô∏è‚É£ HYBRID: "Gated Multi-Stage Filter"

### –§–∏–ª–æ—Å–æ—Ñ–∏—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

```
IF (–ª–æ–∫–∞–ª—å–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å)
   AND (–≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
   AND (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏—á–µ—Å–∫–∏—Ö —Ä–∏—Å–∫–æ–≤)
THEN (–≤—Ö–æ–¥–∏)
```

**–¢–∏–ø –º—ã—à–ª–µ–Ω–∏—è:** Defensive + Predictive
**–ì–æ—Ä–∏–∑–æ–Ω—Ç:** –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–∏–≥–Ω–∞–ª + –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥
**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** 1 + 31 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
**–ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è:**
- Rule-Based –ª–æ–≤–∏—Ç opportunities (–≤—ã—Å–æ–∫–∞—è recall)
- ML —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ª–æ–∂–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã (–≤—ã—Å–æ–∫–∞—è precision)
- Crisis gate –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —á–µ—Ä–Ω—ã—Ö –ª–µ–±–µ–¥–µ–π

### Decision Tree

```
Bar_t arrives
  ‚Üì
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë LAYER 1: OPPORTUNITY DETECTION          ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
  RSI_14(t) < 30?
  ‚Üì
  NO ‚Üí REJECT (–Ω–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
  YES ‚Üì

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë LAYER 2: QUALITY FILTER                 ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
  Extract 31 features
  P_ml(S) ‚â• 0.65?
  ‚Üì
  NO ‚Üí REJECT (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–ª–æ—Ö–æ–π)
  YES ‚Üì

‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë LAYER 3: CATASTROPHE PROTECTION         ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
  VIX > 30? BTC drawdown > 20%?
  ‚Üì
  YES ‚Üí REJECT (—Ä—ã–Ω–æ–∫ –≤ –∫—Ä–∏–∑–∏—Å–µ)
  NO ‚Üì

‚úÖ ENTER
```

### "–í–∏–¥–µ–Ω–∏–µ" –º–æ–¥–µ–ª–∏

```
Stage 1 (Local):
  [Now] RSI = 28 ‚úÖ "Opportunity!"

Stage 2 (Global):
  [1d ago] returns = +3%, RSI = 52
  [4h ago] returns = +2%, RSI = 48
  [1h ago] returns = +1%, RSI = 42
  ‚Üí Pattern: "Pullback in uptrend" ‚úÖ

Stage 3 (Risk):
  VIX = 18 (< 30) ‚úÖ
  BTC -8% from ATH (< -20%) ‚úÖ
  ‚Üí "Safe to trade" ‚úÖ

Decision: ENTER ‚úÖ
```

vs

```
Stage 1 (Local):
  [Now] RSI = 24 ‚úÖ "Opportunity!"

Stage 2 (Global):
  [1d ago] returns = -5%, RSI = 32
  [4h ago] returns = -3%, RSI = 28
  [1h ago] returns = -2%, RSI = 25
  ‚Üí Pattern: "Falling knife" ‚ùå

Decision: REJECT at Layer 2 ‚ùå
(–Ω–µ –¥–æ—à–ª–∏ –¥–æ Layer 3)
```

### –ê–Ω–∞–ª–æ–≥–∏—è

**–ö–æ–º–∏—Ç–µ—Ç –∏–∑ —Ç—Ä–µ—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤:**
1. **–ü–µ—Ä–≤—ã–π —ç–∫—Å–ø–µ—Ä—Ç (Rule):** "–í–∏–∂—É —Å–∏–≥–Ω–∞–ª! RSI –Ω–∏–∑–∫–∏–π!"
2. **–í—Ç–æ—Ä–æ–π —ç–∫—Å–ø–µ—Ä—Ç (ML):** "–ü–æ–¥–æ–∂–¥–∏, —è –ø—Ä–æ–≤–µ—Ä—é –∫–æ–Ω—Ç–µ–∫—Å—Ç... –ù–µ—Ç, –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –ø–ª–æ—Ö–∞—è. Veto!"
3. **–¢—Ä–µ—Ç–∏–π —ç–∫—Å–ø–µ—Ä—Ç (Crisis):** (–Ω–µ –¥–æ—à–ª–∏ –¥–æ –Ω–µ–≥–æ)

–†–µ—à–µ–Ω–∏–µ: —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –í–°–ï —Ç—Ä–æ–µ —Å–æ–≥–ª–∞—Å–Ω—ã.

### –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞

```
P_hybrid(S) = I_RSI(S) ¬∑ P_ml(S) ¬∑ I_crisis(S)

–≥–¥–µ:
  I_RSI(S) = 1 –µ—Å–ª–∏ RSI < 30, –∏–Ω–∞—á–µ 0
  P_ml(S) = XGBoost prediction (—Å–º. –≤—ã—à–µ)
  I_crisis(S) = 1 –µ—Å–ª–∏ –Ω–µ—Ç –∫—Ä–∏–∑–∏—Å–∞, –∏–Ω–∞—á–µ 0

  I_crisis(S) = 1 –µ—Å–ª–∏:
    VIX < 30
    AND max_drawdown < 20%
    AND volume_spike < 5x

Decision = 1 –µ—Å–ª–∏ –≤—Å–µ —Ç—Ä–∏ TRUE:
  - I_RSI(S) = 1
  - P_ml(S) ‚â• 0.65
  - I_crisis(S) = 1
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤–∞—à–µ–π —Ñ–æ—Ä–º—É–ª–æ–π

```
–í–∞—à–∞:       ML(...) ¬∑ ‚àè I_k + opportunity - costs - risk + Œ≥¬∑E[V]
Hybrid:     ML(X)   ¬∑ (I_RSI ¬∑ I_crisis) + 0 - 0 - 0 + 0

–ü—Ä–æ–≥—Ä–µ—Å—Å:
  - ML ‚úÖ
  - ‚àè I_k ‚úÖ (—á–∞—Å—Ç–∏—á–Ω–æ: I_RSI –∏ I_crisis)
  - opportunity ‚âà (–∫–æ—Å–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ I_RSI)
  - costs ‚ùå
  - risk_penalty ‚âà (–∫–æ—Å–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ I_crisis)
  - Œ≥¬∑E[V_future] ‚ùå
```

### –í–æ—Ä–æ–Ω–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

```
–í—Å–µ –±–∞—Ä—ã: 10,000
  ‚Üì
Layer 1 (RSI < 30):
  Passed: 1,065 (10.7%)  ‚Üê Rule-Based –≤–æ—à–ª–∞ –±—ã –≤–æ –≤—Å–µ
  ‚Üì
Layer 2 (ML ‚â• 0.65):
  Passed: ? (–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, –Ω–æ —Å—É–¥—è –ø–æ –≤–∞—à–∏–º –¥–∞–Ω–Ω—ã–º ‚âà 0)
  ‚Üì
Layer 3 (No crisis):
  Passed: ? (–æ–±—ã—á–Ω–æ ‚âà 90% –æ—Ç Layer 2)
  ‚Üì
Final signals: ‚âà 0 –Ω–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
```

---

## üÜö –°–†–ê–í–ù–ò–¢–ï–õ–¨–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê –§–ò–õ–û–°–û–§–ò–ô

| –ê—Å–ø–µ–∫—Ç | Rule-Based | ML XGBoost | Hybrid |
|--------|-----------|-----------|---------|
| **–¢–∏–ø –º—ã—à–ª–µ–Ω–∏—è** | –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ | –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–æ–µ | Defensive + Predictive |
| **–ì–æ—Ä–∏–∑–æ–Ω—Ç** | –¢–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç | 24h –≤–ø–µ—Ä–µ–¥ | –õ–æ–∫–∞–ª—å–Ω—ã–π + –ì–ª–æ–±–∞–ª—å–Ω—ã–π |
| **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** | 1 –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä | 31 –ø—Ä–∏–∑–Ω–∞–∫, 4 TF | 1 + 31 + crisis |
| **–í–∏–¥–∏—Ç –ø—Ä–æ—à–ª–æ–µ** | ‚ùå (—Ç–æ–ª—å–∫–æ 14 –±–∞—Ä–æ–≤ RSI) | ‚úÖ (returns, MA, 4 TF) | ‚úÖ (—á–µ—Ä–µ–∑ ML) |
| **–í–∏–¥–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç** | ‚ùå | ‚úÖ (1h/4h/1d) | ‚úÖ |
| **–ó–∞—â–∏—Ç–∞ –æ—Ç –∫—Ä–∏–∑–∏—Å–æ–≤** | ‚ùå | ‚ùå | ‚úÖ (Layer 3) |
| **–û–±—ä–µ–º —Å–∏–≥–Ω–∞–ª–æ–≤** | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π | –ù–∏–∑–∫–∏–π | –°—Ä–µ–¥–Ω–∏–π |
| **Precision** | –ù–∏–∑–∫–∞—è (~25% –Ω–∞ downtrend) | –í—ã—Å–æ–∫–∞—è (~59%) | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (–æ–∂–∏–¥–∞–µ—Ç—Å—è 65-70%) |
| **Recall** | –í—ã—Å–æ–∫–∞—è (–ª–æ–≤–∏—Ç –≤—Å–µ RSI<30) | –ù–∏–∑–∫–∞—è (–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –º–Ω–æ–≥–∏–µ) | –°—Ä–µ–¥–Ω—è—è |
| **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** | ‚ùå (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞) | ‚úÖ (–æ–±—É—á–∞–µ—Ç—Å—è) | ‚úÖ (—á–µ—Ä–µ–∑ ML) |
| **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** | 100% | 20% (—á–µ—Ä–Ω—ã–π —è—â–∏–∫) | 60% (–∑–Ω–∞–µ–º —á—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—ã–π —Å–ª–æ–π) |
| **–†–∏—Å–∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è** | 0% | –í—ã—Å–æ–∫–∏–π | –°—Ä–µ–¥–Ω–∏–π |
| **Out-of-distribution –ø—Ä–æ–±–ª–µ–º—ã** | –ù–µ—Ç (RSI –≤—Å–µ–≥–¥–∞ 0-100) | ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û (—Å–º. –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ) | ‚ö†Ô∏è –ù–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç ML |

---

## üî¨ –ê–ù–ê–õ–ò–ó –í–ê–®–ò–• –†–ï–ó–£–õ–¨–¢–ê–¢–û–í

### Trade Explainer (10 —Ç—Ä–µ–π–¥–æ–≤, Oct 2025)

```
Layer 1: 10/10 –ø—Ä–æ—à–ª–∏ (100%)  ‚Üê Rule-Based —É–≤–∏–¥–µ–ª–∞ oversold
Layer 2: 0/10 –ø—Ä–æ—à–ª–∏ (0%)     ‚Üê ML –æ—Ç–∫–ª–æ–Ω–∏–ª–∞ –í–°–ï
Layer 3: N/A                  ‚Üê –ù–µ –¥–æ—à–ª–∏

ML scores: –í—Å–µ ‚âà 0.183 (identical!)
Top features: –í—Å–µ –ò–î–ï–ù–¢–ò–ß–ù–´ (1d_SMA, 1d_EMA, etc. —Å scaled > 5 sigma)

–†–µ–∑—É–ª—å—Ç–∞—Ç: 0 —Ç—Ä–µ–π–¥–æ–≤
What-if: 9 –±—ã–ª–∏ –±—ã —É–±—ã—Ç–æ—á–Ω—ã–º–∏, 1 –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –ø—Ä–∏–±—ã–ª—å–Ω—ã–π
```

**–ò–ù–¢–ï–†–ü–†–ï–¢–ê–¶–ò–Ø:**
1. ‚úÖ Rule-Based: "–í–∏–∂—É oversold!" (naive, –Ω–æ —Å–¥–µ–ª–∞–ª–∞ —Å–≤–æ—é —Ä–∞–±–æ—Ç—É)
2. üõ°Ô∏è ML: "–°–¢–û–ü! –í—Å–µ –≤—ã—Å—à–∏–µ TF –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç downtrend!" (—Å–ø–∞—Å–ª–∞ –æ—Ç —É–±—ã—Ç–∫–æ–≤)
3. ‚ùì –ù–æ –ø–æ—á–µ–º—É ML –Ω–µ —É–≤–µ—Ä–µ–Ω–∞ (0.183 vs 0.817)?

**–ü–†–ò–ß–ò–ù–ê:** Out-of-distribution
- –¶–µ–Ω—ã $107K-$111K –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–ª–∏ –≤ training
- Scaled features > 5 sigma (–∞–Ω–æ–º–∞–ª–∏—è)
- –ú–æ–¥–µ–ª—å: "–Ø –Ω–µ –∑–Ω–∞—é —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å —ç—Ç–∏–º–∏ —Ü–µ–Ω–∞–º–∏ ‚Üí –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—é ~random"

### Model Comparator (10K bars, Oct 2025)

```
Rule-Based:
  Trades: 1,065
  WR: 24.6%  ‚Üê –£–∂–∞—Å–Ω–æ! (–æ–∂–∏–¥–∞–ª–∏ ~51%)
  PF: 0.89   ‚Üê –£–±—ã—Ç–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
  PnL: -73.93%

ML XGBoost: (—Å–∫—Ä–∏–ø—Ç —É–ø–∞–ª, –Ω–æ —Å—É–¥—è –ø–æ Trade Explainer):
  Trades: ~0
  WR: N/A
  PnL: 0%

Hybrid: (–Ω–µ –¥–æ—à–ª–∏ –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
```

**–ò–ù–¢–ï–†–ü–†–ï–¢–ê–¶–ò–Ø:**
- –û–∫—Ç—è–±—Ä—å 2025 –±—ã–ª **downtrend**
- Rule-Based: "–ü–æ–∫—É–ø–∞–π –Ω–∞ –∫–∞–∂–¥–æ–º RSI<30" ‚Üí –ö–ê–¢–ê–°–¢–†–û–§–ê (falling knife)
- ML: "–ù–µ —Ç—Ä–æ–≥–∞–π —ç—Ç–æ!" ‚Üí –ü–†–ê–í–ò–õ–¨–ù–û (–Ω–æ –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∞)
- Hybrid: –ó–∞—â–∏—Ç–∏–ª–∞ –æ—Ç —É–±—ã—Ç–∫–æ–≤ (0% PnL –ª—É—á—à–µ —á–µ–º -73.93%!)

---

## üí° –û–¢–õ–ò–ß–ò–Ø –í "LEARNING" –ò "DECISION-MAKING"

### –ö–∞–∫ –º–æ–¥–µ–ª–∏ "—É—á–∞—Ç—Å—è"

**Rule-Based:**
```
"–û–±—É—á–µ–Ω–∏–µ": –ß–µ–ª–æ–≤–µ–∫ –ø–∏—à–µ—Ç –ø—Ä–∞–≤–∏–ª–æ RSI < 30
–ê–¥–∞–ø—Ç–∞—Ü–∏—è: –ù–∏–∫–æ–≥–¥–∞ (rule —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω)
Learning type: None (hardcoded)
```

**ML XGBoost:**
```
"–û–±—É—á–µ–Ω–∏–µ": Supervised learning –Ω–∞ 50,000 samples
  Input: X = [31 features]
  Output: y = UP (1) or DOWN (0) —á–µ—Ä–µ–∑ 24h
  Loss: log_loss(y, P(UP|X))
  Algorithm: Gradient Boosting (200 trees)

–ê–¥–∞–ø—Ç–∞—Ü–∏—è: –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –Ω–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
Learning type: Supervised (batch learning)
```

**Hybrid:**
```
"–û–±—É—á–µ–Ω–∏–µ": –ù–∞—Å–ª–µ–¥—É–µ—Ç ML –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É (XGBoost)
  + Layer 1 –∏ 3 —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã (hardcoded)

–ê–¥–∞–ø—Ç–∞—Ü–∏—è: –ß–∞—Å—Ç–∏—á–Ω–∞—è (—Ç–æ–ª—å–∫–æ ML —Å–ª–æ–π)
Learning type: Hybrid (supervised ML + rule-based gates)
```

### –ö–∞–∫ –º–æ–¥–µ–ª–∏ "–ø—Ä–∏–Ω–∏–º–∞—é—Ç —Ä–µ—à–µ–Ω–∏—è"

**Rule-Based:**
```python
def decide(bar):
    rsi = calculate_RSI_14(bar)
    if rsi < 30:
        return "ENTER"  # –ü—Ä—è–º–æ–µ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—É
    else:
        return "SKIP"
```

**ML XGBoost:**
```python
def decide(bar):
    X = extract_31_features(bar)  # –ú–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
    X_scaled = scaler.transform(X)

    # 200 –¥–µ—Ä–µ–≤—å–µ–≤ –≥–æ–ª–æ—Å—É—é—Ç
    votes = []
    for tree in model.trees:
        leaf = tree.predict(X_scaled)  # –ü—Ä–æ—Ö–æ–¥ –ø–æ –¥–µ—Ä–µ–≤—É
        votes.append(leaf.weight)

    prob_up = sigmoid(sum(votes))

    if prob_up >= 0.65:
        return "ENTER"  # –ù–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥–∞
    else:
        return "SKIP"
```

**Hybrid:**
```python
def decide(bar):
    # Stage 1: –õ–æ–∫–∞–ª—å–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å
    rsi = calculate_RSI_14(bar)
    if rsi >= 30:
        return "SKIP", "No local opportunity"

    # Stage 2: –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    X = extract_31_features(bar)
    prob_up = ml_model.predict(X)
    if prob_up < 0.65:
        return "SKIP", "Global context negative"

    # Stage 3: –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ
    if is_crisis():
        return "SKIP", "Market in crisis"

    return "ENTER"  # –í—Å–µ —Ç—Ä–∏ —Å–ª–æ—è –æ–¥–æ–±—Ä–∏–ª–∏
```

---

## üéØ –û–¢–í–ï–¢ –ù–ê –í–ê–® –ì–õ–ê–í–ù–´–ô –í–û–ü–†–û–°

### "–ù—É–∂–Ω—ã –ª–∏ –≤—Å–µ —Ç—Ä–∏ –º–æ–¥–µ–ª–∏?"

**–î–ê, –µ—Å–ª–∏ –æ–Ω–∏ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ —Ä–∞–∑–Ω—ã–µ!**

–ò–∑ –≤–∞—à–∏—Ö—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

**Rule-Based vs ML:**
```
Rule-Based: –í–æ—à–ª–∞ –≤ 1,065 —Ç—Ä–µ–π–¥–æ–≤ ‚Üí -73.93%
ML:         –í–æ—à–ª–∞ –≤ ~0 —Ç—Ä–µ–π–¥–æ–≤ ‚Üí 0%

Overlap: ML –æ—Ç–∫–ª–æ–Ω–∏–ª–∞ 100% Rule —Å–∏–≥–Ω–∞–ª–æ–≤
‚Üí –§–£–ù–î–ê–ú–ï–ù–¢–ê–õ–¨–ù–û –†–ê–ó–ù–´–ï —Ä–µ—à–µ–Ω–∏—è!
```

**–ü–æ—á–µ–º—É –æ–Ω–∏ —Ç–∞–∫ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è?**

1. **Information set:**
   - Rule: –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ RSI (1 number)
   - ML: –≤–∏–¥–∏—Ç 31 features (31 numbers, 4 timeframes)

2. **Decision logic:**
   - Rule: if-then –ø—Ä–∞–≤–∏–ª–æ
   - ML: pattern matching –∏–∑ 50,000 –∏—Å—Ç–æ—Ä–∏–π

3. **Result:**
   - Rule: "Oversold ‚Üí buy" (–≤—Å–µ–≥–¥–∞)
   - ML: "Oversold + downtrend ‚Üí don't buy" (–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–°–¶–ï–ù–ê–†–ò–ô A: –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å ML –Ω–∞ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö**
```
Current: Training –Ω–∞ $13K-$70K ‚Üí testing –Ω–∞ $107K-$111K (fail)
Solution: Training –Ω–∞ $50K-$111K (2020-2025)

Expected result:
  - ML –Ω–∞—É—á–∏—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤—ã—Å–æ–∫–∏–º–∏ —Ü–µ–Ω–∞–º–∏
  - Hybrid —Å—Ç–∞–Ω–µ—Ç profitable
  - –°–º–æ–∂–µ–º —á–µ—Å—Ç–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å –≤—Å–µ 3 –º–æ–¥–µ–ª–∏
```

**–°–¶–ï–ù–ê–†–ò–ô B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ features**
```
Current: absolute prices ($107K ‚Üí scaled 5.8 sigma)
Solution: normalized features (returns, ratios, etc.)

Example:
  Instead of: close_1d = $114,194
  Use:        returns_1d = (close - close_yesterday) / close_yesterday = +0.03

Expected: ML –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ª—é–±—ã—Ö —Ü–µ–Ω–∞—Ö
```

**–°–¶–ï–ù–ê–†–ò–ô C: Ensemble –≤—Å–µ—Ö —Ç—Ä–µ—Ö**
```
If (Rule-Based AND ML agree) ‚Üí HIGH confidence
If (Rule-Based XOR ML) ‚Üí SKIP (disagreement)
If (Hybrid passes) ‚Üí MEDIUM confidence

Or weighted average:
  P_ensemble = 0.2¬∑P_rule + 0.5¬∑P_ml + 0.3¬∑P_hybrid
```

---

## üìä –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å Out-of-Distribution (–ö–†–ò–¢–ò–ß–ù–û!)

```bash
# –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å –Ω–∞ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
python scripts/train_xgboost_multi_tf.py --start 2020 --end 2025

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å normalized features
# –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å feature extractor
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

```bash
git pull
python scripts/compare_all_three_models.py
```

### 3. –ê–Ω–∞–ª–∏–∑ —á–µ—Å—Ç–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è —É–≤–∏–¥–∏–º:
- –ö–∞–∫–∞—è –º–æ–¥–µ–ª—å –ª—É—á—à–µ?
- Overlap –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏?
- –ù—É–∂–Ω—ã –ª–∏ –≤—Å–µ —Ç—Ä–∏?

### 4. –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫ –≤–∞—à–µ–π —Ñ–æ—Ä–º—É–ª–µ

```
P_j(S) = ML(X) ¬∑ (I_RSI ¬∑ I_crisis) + opportunity - costs - risk + Œ≥¬∑E[V]

Currently missing:
  - opportunity(S): –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–∞–∫ BB position, ATR ratio, etc.
  - costs(S): –∫–æ–º–∏—Å—Å–∏–∏, slippage
  - risk_penalty(S): volatility penalty, drawdown penalty
  - Œ≥¬∑E[V_future]: RL component (Q-learning, Actor-Critic)
```

---

**–î–∞—Ç–∞:** 2025-11-11
**–í–µ—Ä—Å–∏—è:** 1.0
**–°—Ç–∞—Ç—É—Å:** üü° Waiting for ML retraining on fresh data
